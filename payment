
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DNAæ¤œæŸ» - ãŠæ”¯æ‰•ã„</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:sans-serif;background:#000;min-height:100vh;display:flex;align-items:center;justify-content:center;color:#fff;padding:20px}
.container{max-width:600px;width:100%;background:rgba(0,0,0,.95);padding:40px;border-radius:20px;border:3px solid rgba(122,92,255,.5)}
.title{font-size:2rem;color:#00d4ff;margin-bottom:30px;text-align:center;font-weight:900}
.plan-info{background:rgba(122,92,255,.1);padding:25px;border-radius:12px;margin-bottom:30px;border:2px solid rgba(122,92,255,.3)}
.plan-name{font-size:1.4rem;color:#00d4ff;margin-bottom:10px;font-weight:700}
.plan-price{font-size:2rem;color:#7a5cff;margin-bottom:15px;font-weight:900}
.form-group{margin-bottom:20px}
.form-label{font-size:.9rem;color:#00d4ff;margin-bottom:8px;display:block;font-weight:700}
.form-input{width:100%;padding:15px;font-size:1rem;border:2px solid rgba(122,92,255,.5);border-radius:10px;background:rgba(0,0,0,.5);color:#fff}
#card-element{padding:15px;border:2px solid rgba(122,92,255,.5);border-radius:10px;background:rgba(0,0,0,.5)}
.btn-pay{background:linear-gradient(135deg,#00d4ff 0%,#7a5cff 100%);color:#000;border:none;padding:20px;border-radius:12px;cursor:pointer;font-size:1.3rem;width:100%;font-weight:900;margin-top:20px}
.success-message{background:rgba(0,255,0,.1);border:2px solid rgba(0,255,0,.5);padding:30px;border-radius:12px;text-align:center;display:none}
.success-message.active{display:block}
.success-title{font-size:2rem;color:#00ff00;margin-bottom:20px;font-weight:900}
.back-link{display:block;margin-top:20px;color:rgba(255,255,255,.6);text-align:center;font-size:.9rem;text-decoration:none}
</style>
</head>
<body>

<div class="container">
  <div class="title">ğŸ§¬ ãŠæ”¯æ‰•ã„</div>

  <div class="plan-info" id="planInfo">
    <div class="plan-name" id="planName">èª­ã¿è¾¼ã¿ä¸­...</div>
    <div class="plan-price" id="planPrice">Â¥---</div>
  </div>

  <div class="success-message" id="successMessage">
    <div class="success-title">âœ… æ±ºæ¸ˆæˆåŠŸï¼</div>
    <div id="successText"></div>
  </div>

  <form id="payment-form">
    <div class="form-group">
      <label class="form-label">ãŠåå‰ *</label>
      <input type="text" class="form-input" id="name" placeholder="å±±ç”° å¤ªéƒ" required>
    </div>

    <div class="form-group">
      <label class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>
      <input type="email" class="form-input" id="email" placeholder="example@email.com" required>
    </div>

    <div class="form-group">
      <label class="form-label">ã‚«ãƒ¼ãƒ‰æƒ…å ± *</label>
      <div id="card-element"></div>
    </div>

    <button type="submit" class="btn-pay" id="submit-button">ğŸ§¬ DNAæ¤œæŸ»ã‚’è³¼å…¥</button>
  </form>

  <a href="/index.html" class="back-link">â† ã‚¨ãƒ³ãƒˆãƒ©ãƒ³ã‚¹ã«æˆ»ã‚‹</a>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
const STRIPE_KEY='pk_test_51SRULXE90hNxeF7bObkIHe2xyOrQ6NZEFhKwxj9UWFyAyCX65gpKDiXD1iMM3VgPDAWqfOuAJgphapS2Ss9vjwDu00iSwc7QTr';

const plans={
100:{name:'åŸºæœ¬DNAæ¤œæŸ»',price:'Â¥100'},
980:{name:'åº§æ¨™DNAæ¤œæŸ»',price:'Â¥980'},
2980:{name:'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ DNAæ¤œæŸ»',price:'Â¥2,980'},
29800:{name:'å®Œå…¨DNAæ¤œæŸ»',price:'Â¥29,800'}
};

const urlParams=new URLSearchParams(window.location.search);
const planType=parseInt(urlParams.get('plan'))||980;
const currentPlan=plans[planType];

if(currentPlan){
document.getElementById('planName').textContent=currentPlan.name;
document.getElementById('planPrice').textContent=currentPlan.price;
}

const stripe=Stripe(STRIPE_KEY);
const elements=stripe.elements();
const cardElement=elements.create('card',{style:{base:{color:'#fff',fontSize:'16px'}}});
cardElement.mount('#card-element');

document.getElementById('payment-form').addEventListener('submit',async(e)=>{
e.preventDefault();
const btn=document.getElementById('submit-button');
btn.disabled=true;
btn.textContent='å‡¦ç†ä¸­...';

const name=document.getElementById('name').value.trim();
const email=document.getElementById('email').value.trim();

const{paymentMethod,error}=await stripe.createPaymentMethod({
type:'card',
card:cardElement,
billing_details:{name:name,email:email}
});

if(error){
alert('ã‚¨ãƒ©ãƒ¼: '+error.message);
btn.disabled=false;
btn.textContent='ğŸ§¬ DNAæ¤œæŸ»ã‚’è³¼å…¥';
}else{
document.getElementById('payment-form').style.display='none';
document.getElementById('planInfo').style.display='none';
document.getElementById('successMessage').classList.add('active');
document.getElementById('successText').innerHTML='<strong>'+name+'</strong> æ§˜<br><br>è³¼å…¥ãŒå®Œäº†ã—ã¾ã—ãŸï¼<br><br>3ç§’å¾Œã«éºä¼å­è§£æãƒšãƒ¼ã‚¸ã¸ç§»å‹•ã—ã¾ã™...';
setTimeout(()=>{
window.location.href='/index.html?paid=true&plan='+planType;
},3000);
}
});
</script>

</body>
</html>
